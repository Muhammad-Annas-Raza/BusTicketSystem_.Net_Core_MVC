@model tbl_bus
@{
        Layout = "~/Views/Shared/_ConductorLayout.cshtml";
}
  <div class="pagetitle">
    <h1>Collect Amount</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item">Collect Amount</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->
<section class="section">
  <div class="card">
    <div class="card-body">
          
    <div>
      <!-- Bordered Table -->   
<table id="exam" class="table table-striped table-bordered mt-3">
        <thead>
          <tr>
            <!-- <th scope="col" class="text-center table-active">User id</th> -->
            <th scope="col" class="text-center table-dark">Bus Number Plate</th>
            <th scope="col" class="text-center table-dark">Bus Ticket Price</th>
            <th scope="col" class="text-center table-dark">Bus No. of Seats</th>
            <th scope="col" class="text-center table-dark">Bus Category</th>
            <th scope="col" class="text-center table-dark">Bus Starting Time</th>
            <th scope="col" class="text-center table-dark">Bus Destination</th>
            <th scope="col" class="text-center table-dark">bus Available</th>
          </tr>
        </thead>
        <tbody>
            <tr class="xyz">            
           <td class="text-center Usr_name">@Model.bus_NumberPlate</td>
           <td class="text-center usr_email">@Model.bus_ticketPrice</td>
           <td class="text-center">@Model.bus_noOfSeats</td>
           <td class="text-center org_name">@Model.bus_category</td>                                      
           <td class="text-center nmbre_plate">@Model.bus_startingTime</td>                                      
           <td class="text-center">@Model.bus_destination</td> 
           @if(Model.bus_available == true){<td class="text-center">Yes</td>    }
           else{<td class="text-center">No</td>    }                    
         </tr>     
        </tbody>
      </table>

      <form asp-action="BusStarted" asp-controller="Conductor">
     <div class="text-center">
          <button  type="submit" class="button" style="font-size: 20px;"><span>Bus Started</span></button>
     </div>
</form>


 <div id="update01">
<table id="exam" class="table table-striped table-bordered mt-3">
        <thead>
          <tr>
            <!-- <th scope="col" class="text-center table-active">User id</th> -->
            <th scope="col" class="text-center table-dark">Serial no.</th>
            <th scope="col" class="text-center table-dark">Bus Seat Number</th>
            <th scope="col" class="text-center table-dark">Booked</th>
            <th scope="col" class="text-center table-dark">Customer Name</th>
            <th scope="col" class="text-center table-dark">Ticket Price</th>
            <th scope="col" class="text-center table-dark">Amount Collected</th>
          </tr>
        </thead>
        <tbody>
                        
  @{
          var j = 1;
  foreach (tbl_busSeats i in (List<tbl_busSeats>)ViewData["rows"])
  {
    
      <tr>
               <td class="text-center Usr_name">@j</td>
               <td class="text-center Usr_name">Seat # @i.busSeat_SeatNumber</td>
           @if(i.busSeat_isBooked == true){<td class="text-center">Yes</td>    }
           else{<td class="text-center">No</td>    }   
            <td class="text-center">@i.busSeat_customerName</td>
            <td class="text-center">@i.busSeat_customerDiscountedTicketPrice</td>
            @if(i.busSeat_isBooked == true)
            {                
                        
           <td scope="row" class="text-center">
           <a 
           data-ajax="true"
           data-ajax-mode="replace"
           data-ajax-update="#update01"

           asp-controller="Conductor" 
           asp-action="AmountCollected"
          asp-route-id="@i.busSeat_id"
           class="btn btn-primary" style="font-size: 18px;">Collected</a>
           </td>  
                        
            }
           else{<td class="text-center"><button disabled class="btn btn-primary" style="font-size: 18px;">Collected</button></td> }   
            
                                </tr>
                                j++;
                            }

                            
                        }                 
           
        </tbody>
      </table>

      </div>
      </div>
     </div>
</div>
</section>


   
 
 


